# JazdeckÃ½ klub ZelenÃ¡ mÃ­Ä¾a - ProfesionÃ¡lny systÃ©m
## ManaÅ¾ment podÄ¾a pravidiel SJF, Å VPS SR a FEI

---

## ğŸ“‹ PrehÄ¾ad systÃ©mu

KompletnÃ½ profesionÃ¡lny manaÅ¾ment systÃ©m pre jazdeckÃ½ klub, navrhnutÃ½ v sÃºlade s pravidlami:

- **SJF** (SlovenskÃ¡ jazdeckÃ¡ federÃ¡cia) - NÃ¡rodnÃ© pravidlÃ¡ jazdeckÃ©ho Å¡portu
- **Å VPS SR** (Å tÃ¡tna veterinÃ¡rna a potravinovÃ¡ sprÃ¡va) - VeterinÃ¡rne poÅ¾iadavky
- **FEI** (Federation Equestre Internationale) - MedzinÃ¡rodnÃ© pravidlÃ¡

---

## ğŸ‡ Moduly systÃ©mu

### 1. Evidencia konÃ­
- KompletnÃ¡ identifikÃ¡cia podÄ¾a Å VPS:
  - Pas koÅˆa (povinnÃ½)
  - Å½ivotnÃ© ÄÃ­slo (UELN)
  - MikroÄip ISO 11784 (povinnÃ½ od 2013)
- SJF registrÃ¡cia a licencia
- FEI registrÃ¡cia a FEI pas
- VeterinÃ¡rny status a oÄkovania

### 2. Evidencia jazdcov
- SJF licencie:
  - SZVJ (SkÃºÅ¡ky zÃ¡kladnÃ©ho vÃ½cviku jazdca)
  - NÃ¡rodnÃ¡ licencia
  - MedzinÃ¡rodnÃ¡ licencia
- FEI registrÃ¡cia a FEI ID
- KategÃ³rie: Deti, Pony, Junior, MladÃ½ jazdec, Senior, AmatÃ©r
- ZdravotnÃ¡ spÃ´sobilosÅ¥

### 3. TrÃ©neri
- SJF kvalifikÃ¡cia (1.-4. stupeÅˆ)
- Å pecializÃ¡cie: skoky, drezÃºra, voltÃ­Å¾, vytrvalosÅ¥
- BezÃºhonnosÅ¥ (vÃ½pis z registra trestov pri prÃ¡ci s mlÃ¡deÅ¾ou)
- CertifikÃ¡t prvej pomoci

### 4. VeterinÃ¡rne zÃ¡znamy
- **OÄkovania:**
  - ChrÃ­pka (FEI: kaÅ¾dÃ½ch 6 mesiacov)
  - Tetanus
  - EHV-1 (herpesvÃ­rus)
- **VyÅ¡etrenia:**
  - IAE test (infekÄnÃ¡ anÃ©mia) - kaÅ¾dÃ© 2-3 roky
  - Coggins test
  - FEI veterinÃ¡rna kontrola
- **StarostlivosÅ¥:**
  - OdÄervenie
  - Zuby
  - Podkovanie (kaÅ¾dÃ½ch 6-8 tÃ½Å¾dÅˆov)
- AutomatickÃ© upozornenia na blÃ­Å¾iace sa termÃ­ny

### 5. TrÃ©ningy
- Typy: IndividuÃ¡lny, skupinovÃ½, lonÅ¾ovanie, skoky, drezÃºra, terÃ©n
- PrÃ­prava na SZVJ
- PrÃ­prava na preteky
- RezervaÄnÃ½ systÃ©m

### 6. Preteky a sÃºÅ¥aÅ¾e
- NÃ¡rodnÃ© a medzinÃ¡rodnÃ© preteky
- SJF a FEI kÃ³dy pretekov
- DisciplÃ­ny: Skoky, drezÃºra, vÅ¡estrannosÅ¥, vytrvalosÅ¥
- Stupne: ZM (80cm), Z (100cm), ZL (110cm), L (120cm), S (130cm), ST (140cm), T (150cm), TT (160cm)
- PrihlÃ¡Å¡ky a termÃ­ny

### 7. Platby a ÄlenstvÃ¡
- ÄŒlenskÃ© poplatky
- TrÃ©ningy
- Ustajnenie
- SJF/FEI licencie a registrÃ¡cie

### 8. KÅ•menie
- DennÃ© zÃ¡znamy
- KÅ•mne dÃ¡vky (25% rÃ¡no, 25% obed, 50% veÄer)
- Evidencia kÅ•menia

### 9. RezervÃ¡cie z webu
- Online formulÃ¡r
- AutomatickÃ© notifikÃ¡cie
- Potvrdenia rezervÃ¡ciÃ­

---

## ğŸ”’ SJF PravidlÃ¡ - implementovanÃ© v systÃ©me

### Licencie jazdcov
- **SZVJ** - minimÃ¡lny vek 9 rokov, vÃ½Å¡ka 140cm
- **TeoretickÃ¡ skÃºÅ¡ka**: 30 otÃ¡zok, 60 minÃºt, min. 25 sprÃ¡vnych
- **PraktickÃ¡ skÃºÅ¡ka**: zÃ¡kladnÃ© chody, prekÃ¡Å¾ky
- PotrebnÃ©: lekÃ¡rske potvrdenie, registrovanÃ½ trÃ©ner

### KategÃ³rie jazdcov
- Deti: do 12 rokov
- Pony jazdci
- Juniori: 14-18 rokov
- MladÃ­ jazdci: 16-21 rokov
- Seniori: 21+

### KvalifikÃ¡cia trÃ©nerov
- 1.-4. kvalifikaÄnÃ½ stupeÅˆ SJF
- VÃ½pis z registra trestov pri prÃ¡ci s mlÃ¡deÅ¾ou
- Å kolenia a certifikÃ¡cie

---

## ğŸ¥ Å VPS PravidlÃ¡ - implementovanÃ© v systÃ©me

### IdentifikÃ¡cia koÅˆa (povinnÃ©)
- Pas koÅˆa
- Å½ivotnÃ© ÄÃ­slo (UELN)
- MikroÄip ISO 11784 (od 2013)

### VeterinÃ¡rne poÅ¾iadavky
- Evidencia oÄkovanÃ­
- Test IAE (infekÄnÃ¡ anÃ©mia)
- ZdravotnÃ© prehliadky

---

## ğŸŒ FEI PravidlÃ¡ - implementovanÃ© v systÃ©me

### RegistrÃ¡cia
- FEI ID pre jazdcov
- FEI pas pre kone
- MikroÄip povinnÃ½ od 2013
- FEI HorseApp (evidencia teplÃ´t)

### OÄkovania pre medzinÃ¡rodnÃ© preteky
- ChrÃ­pka: kaÅ¾dÃ½ch 6 mesiacov
- ZÃ¡znam v FEI HorseApp

### VeterinÃ¡rne kontroly
- Pred prÃ­jazdom na preteky
- Pred Å¡tartom
- Po skonÄenÃ­

---

## ğŸ’» TechnolÃ³gie

- **Frontend**: HTML5, CSS3, JavaScript (vanilla)
- **Backend**: Node.js, Vercel Serverless Functions
- **DatabÃ¡za**: Supabase (PostgreSQL)
- **Hosting**: Vercel

---

## ğŸš€ InÅ¡talÃ¡cia

### 1. Supabase
1. Vytvorte projekt na supabase.com
2. Spustite `database.sql` v SQL editore
3. ZÃ­skajte URL a Service Key

### 2. Vercel
1. Import projektu z GitHub
2. Nastavte environment variables:
   - `SUPABASE_URL`
   - `SUPABASE_SERVICE_KEY`
3. Deploy

### 3. Prihlasovacie Ãºdaje
- Email: `admin@jkzm.sk`
- Heslo: `admin123`

---

## ğŸ“± PrÃ­stupovÃ© URL

- **WebstrÃ¡nka**: https://jkzm.vercel.app
- **Admin panel**: https://jkzm.vercel.app/admin

---

## ğŸ“ Kontakt

**JazdeckÃ½ klub ZelenÃ¡ mÃ­Ä¾a JaslovskÃ© Bohunice, o.z.**

- **Adresa**: AreÃ¡l PD JaslovskÃ© Bohunice, HlavnÃ¡ Jaslovce 124/127, 919 30
- **TelefÃ³n**: +421 905 523 022
- **Email**: apilera@apilera.com
- **Facebook**: facebook.com/JKZMJB

---

Â© 2025 JazdeckÃ½ klub ZelenÃ¡ mÃ­Ä¾a JaslovskÃ© Bohunice, o.z.

---

## ğŸ‡ SJF Register (novÃ©!)

SystÃ©m obsahuje synchronizÃ¡ciu s evidencia.sjf.sk:
- 50 aktÃ­vnych klubov
- 41 aktÃ­vnych rozhodcov
- 6 aktÃ­vnych staviteÄ¾ov parkÃºrov

### TabuÄ¾ky
- `sjf_clubs` - VÅ¡etky jazdeckÃ© kluby
- `sjf_persons` - Rozhodcovia, trÃ©neri, stavitelia
- `sjf_horses` - Register konÃ­
- `sjf_sync_log` - Log synchronizÃ¡ciÃ­

### AktualizÃ¡cia dÃ¡t
```bash
cd tools/sjf-import
npm install
node sjf-import.js --clubs SJF-Export_kluby.csv
node sjf-import.js --persons SJF-Export_osoby.csv
```

Viac info: `SJF-PREHLAD.md`

---

## ğŸ“° CMS SystÃ©m (novÃ©!)

### NovÃ© tabuÄ¾ky
- `albums` - Fotoalbumy
- `photos` - Fotky s vÃ¤zbami na kone/jazdcov/sÃºÅ¥aÅ¾e
- `articles` - ÄŒlÃ¡nky a novinky
- `article_categories` - KategÃ³rie ÄlÃ¡nkov
- `pages` - StatickÃ© strÃ¡nky
- `documents` - Dokumenty na stiahnutie
- `partners` - Partneri a sponzori
- `competition_results` - VÃ½sledky sÃºÅ¥aÅ¾Ã­
- `horse_rider_history` - HistÃ³ria kÃ´Åˆ-jazdec
- `settings` - Nastavenia webu

### NovÃ© API endpointy
- `/api/articles` - CRUD ÄlÃ¡nky
- `/api/albums` - CRUD albumy
- `/api/photos` - CRUD fotky
- `/api/pages` - CRUD strÃ¡nky
- `/api/documents` - CRUD dokumenty
- `/api/partners` - CRUD partneri
- `/api/settings` - Nastavenia
- `/api/competition-results` - VÃ½sledky

### Admin panel sekcie
- ğŸ“° ÄŒlÃ¡nky - sprÃ¡va noviniek s kategÃ³riami
- ğŸ–¼ï¸ GalÃ©ria - albumy a fotky
- ğŸ“„ StrÃ¡nky - statickÃ½ obsah
- ğŸ“ Dokumenty - sÃºbory na stiahnutie
- ğŸ¤ Partneri - sponzori a partneri
- âš™ï¸ Nastavenia - konfigurÃ¡cia webu

### SQL pre CMS
Spusti `database-cms.sql` v Supabase SQL Editor.

---

## ğŸ†• Verzia 5.1.0 (2026-01-22)

### NovÃ© funkcie
- âœ… **WYSIWYG editor** - Quill.js pre ÄlÃ¡nky a strÃ¡nky
- âœ… **SprÃ¡va fotiek** - Multi-upload do albumov
- âœ… **Emoji picker** - 30+ ikon pre sluÅ¾by
- âœ… **Å tÃ­tky sluÅ¾ieb** - ObsadenÃ©, Pripravujeme, Novinka, Akcia
- âœ… **URL hash** - PamÃ¤tanie sekcie po refreshi
- âœ… **SEO optimalizÃ¡cia** - Meta tagy, Open Graph
- âœ… **PWA manifest** - Podpora pre mobilnÃ© zariadenia

### Opravy
- OdstrÃ¡nenÃ© vÅ¡etky console.log
- ImplementovanÃ© TODO funkcie
- VylepÅ¡enÃ½ error handling

---

## ğŸ“‹ O klube strÃ¡nka (v5.2.0)

NovÃ¡ strÃ¡nka `/o-klube.html` obsahuje:

### RegistraÄnÃ© Ãºdaje
- IÄŒO: 53536002
- NÃ¡zov: JazdeckÃ½ klub ZelenÃ¡ mÃ­Ä¾a JaslovskÃ© Bohunice
- PrÃ¡vna forma: ObÄianske zdruÅ¾enie (o.z.)
- SJF oblasÅ¥: Z (ZÃ¡padoslovenskÃ¡)

### 2% z dane sekcia
- QR kÃ³d pre rÃ½chly prÃ­stup
- PredvyplnenÃ© Ãºdaje pre tlaÄivÃ¡
- Postup pre zamestnancov, FO a PO
- TermÃ­ny 2026
- Odkazy na oficiÃ¡lne tlaÄivÃ¡ FS SR

### NavigÃ¡cia
Odkaz "O klube" je pridanÃ½ do hlavnej navigÃ¡cie aj do pÃ¤tiÄky.

---

## ğŸ“‹ Verzia 6.5.0 (2026-01-25)

### Admin UI vylepsenia
- **Vaccinations CRUD** - Edit a Delete tlacidla v admin paneli
- **Feeding Items** - Nested CRUD pre polozky krmenia (Detail modal)
- **Admin Users** - Sprava admin pouzivatelov (role, is_active)
- **Compliance Dashboard** - Expirujuce SJF licencie a ockovania

### Nove API endpointy (v6.4)
- `/api/feeding-items` - CRUD polozky krmenia
- `/api/vaccinations` - CRUD ockovania
- `/api/competition-entries` - CRUD prihlasky na preteky
- `/api/admin-users` - CRUD admin pouzivatelia
- `/api/health` - System health check (public)

### Technicke zmeny
- Vet sekcia ma teraz taby (Vet zaznamy / Ockovania)
- Feeding tabulka ma tlacidlo Detail pre nested CRUD
- Compliance dashboard zobrazuje expirujuce licencie a ockovania

---

## ğŸ“‹ Verzia 6.21.7 (2026-01-29)

### Calendar Attendance + Billing Workflow
- **Slot detail modal** - zobrazuje rezervÃ¡cie s charge info
- **Mark attended** - vytvorÃ­ trÃ©ning + automaticky vygeneruje charge podÄ¾a cennÃ­ka
- **Inline payment** - priamo v modali: [HotovosÅ¥/Karta/Prevod] [Ref] [UhradiÅ¥]
- **Storno charge** - s povinnÃ½m dÃ´vodom
- **No-cache headers** - slot detail endpoint vÅ¾dy vracia ÄerstvÃ© dÃ¡ta

### âš ï¸ Supabase RLS PoznÃ¡mka
TabuÄ¾ka `billing_charges` mÃ¡ RLS (Row Level Security) zapnutÃ©. Pre sprÃ¡vne fungovanie charge lookup v kalendÃ¡ri je potrebnÃ©:
- **MoÅ¾nosÅ¥ 1**: `ALTER TABLE billing_charges DISABLE ROW LEVEL SECURITY;`
- **MoÅ¾nosÅ¥ 2**: PridaÅ¥ policy: `CREATE POLICY "Allow all for service" ON billing_charges FOR ALL USING (true) WITH CHECK (true);`

Bez tohto nastavenia calendar charge lookup nebude fungovaÅ¥ (queries vrÃ¡tia prÃ¡zdne vÃ½sledky).
